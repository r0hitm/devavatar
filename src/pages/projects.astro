---
import RootLayout from "@/layouts/RootLayout.astro";
import { SITE } from "@/consts";
import { getCollection } from "astro:content";
import ProjectCard from "@/components/ProjectCard.astro";
import Prose from "@/components/Prose.astro";
import { useTranslations } from "@/i18n";

const projects = (await getCollection("project")).sort(
    (a, b) => b.data.date.valueOf() - a.data.date.valueOf()
);

const currentLang = Astro.currentLocale;
const localized = useTranslations(currentLang);
---

<RootLayout
    title={`Projects | ${SITE.title}`}
    description="Some of my personal projects"
>
    <Prose>
        <h1 class="mb-2 text-3xl font-bold">{localized.PROJECTS.heading}</h1>
        <p>
            {localized.PROJECTS.p}
            <a href="https://github.com/r0hitm?tab=repositories" target="_blank"
                >GitHub</a
            >.
        </p>
    </Prose>

    <ul class="mt-8 space-y-4">
        {projects.map(project => <ProjectCard {...project.data} />)}
    </ul>
</RootLayout>
